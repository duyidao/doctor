import{g as K,q as Q,u as $,i as v,k as G,r as n,o as r,c as y,w as a,N as H,f as q,d as e,K as d,j as J,Q as W,a as V,F,b as N,P as U,p as X,e as Z,_ as ee}from"./index-04d23bd8.js";import{a as le,i as ae,j as te,k as oe,r as ue}from"./index-5d0b4697.js";import{V as se}from"./visitor-65bd1cfe.js";const ne=b=>(X("data-v-aeb061fc"),b=b(),Z(),b),de={class:"header"},re=ne(()=>q("div",null,"就诊人管理",-1)),ie={key:0,class:"user"},ce={key:1,class:"form"},pe=K({__name:"index",setup(b){const f=Q(),M=$(),g=v([]),h=async()=>{const u=await H();if(g.value=u.data,f.query.type==="chnagePage"&&f.query.id){_.value=!0;let t=g.value.find(i=>i.id==f.query.id);t&&(o.value=t)}},z=v(-1),C=v([]),P=async()=>{const u=await le();u.code===200&&(C.value=u.data)},S={lazy:!0,async lazyLoad(u,t){const i=await ae(u.data.id||"86");let k=[];i.code===200&&(k=i.data.map(c=>({id:c.id,label:c.name,value:c.value,leaf:!c.hasChildren}))),t(k)}};G(()=>{h(),P(),f.query.type==="chnagePage"&&(_.value=!0)});const B=u=>{z.value=u},_=v(!1),T=(u={})=>{_.value=!0,o.value=u},o=v({}),L=async()=>{let u=null;o.value.id?u=await te(o.value):u=await oe(o.value),u.code===200?(f.query.type==="chnagePage"?M.back():(U.success("就诊人操作成功"),h()),_.value=!1):U.error(u.message)},Y=async u=>{const t=await ue(u.id);t.code===200?U.success("删除成功"):U.error(t.message),h()},E=()=>{o.value={}};return(u,t)=>{const i=n("el-button"),k=n("el-empty"),c=n("el-divider"),p=n("el-input"),s=n("el-form-item"),A=n("el-option"),D=n("el-select"),m=n("el-radio"),w=n("el-radio-group"),R=n("el-date-picker"),x=n("el-form"),j=n("el-cascader"),O=n("el-card");return r(),y(O,null,{header:a(()=>[q("div",de,[re,e(i,{type:"primary",icon:J(W),onClick:T},{default:a(()=>[d("添加就诊人")]),_:1},8,["icon"])])]),default:a(()=>[_.value?(r(),V("div",ce,[e(c,{"content-position":"left"},{default:a(()=>[d("就诊人信息")]),_:1}),e(x,{style:{margin:"25px auto",width:"80%"}},{default:a(()=>[e(s,{label:"用户姓名"},{default:a(()=>[e(p,{modelValue:o.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.name=l),placeholder:"请输入用户姓名"},null,8,["modelValue"])]),_:1}),e(s,{label:"证件类型"},{default:a(()=>[e(D,{modelValue:o.value.certificatesType,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.certificatesType=l),placeholder:"请选择证件类型",style:{width:"100%"}},{default:a(()=>[(r(!0),V(F,null,N(C.value,l=>(r(),y(A,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"证件号码"},{default:a(()=>[e(p,{modelValue:o.value.certificatesNo,"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.certificatesNo=l),placeholder:"请输入证件号码"},null,8,["modelValue"])]),_:1}),e(s,{label:"用户性别"},{default:a(()=>[e(w,{modelValue:o.value.sex,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.sex=l)},{default:a(()=>[e(m,{label:1,size:"large"},{default:a(()=>[d("男")]),_:1}),e(m,{label:0,size:"large"},{default:a(()=>[d("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"出生日期"},{default:a(()=>[e(R,{type:"date","value-format":"YYYY-MM-DD",modelValue:o.value.birthdate,"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.birthdate=l),placeholder:"请选择出生日期",size:"default"},null,8,["modelValue"])]),_:1}),e(s,{label:"手机号码"},{default:a(()=>[e(p,{modelValue:o.value.phone,"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.phone=l),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{"content-position":"left"},{default:a(()=>[d("建档信息（完善后部分医院首次就诊不排队建档）")]),_:1}),e(x,{style:{margin:"25px auto",width:"80%"}},{default:a(()=>[e(s,{label:"婚姻状况"},{default:a(()=>[e(w,{modelValue:o.value.isMarry,"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.isMarry=l)},{default:a(()=>[e(m,{label:1,size:"large"},{default:a(()=>[d("已婚")]),_:1}),e(m,{label:0,size:"large"},{default:a(()=>[d("未婚")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"自费/医保"},{default:a(()=>[e(w,{modelValue:o.value.isInsure,"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.isInsure=l)},{default:a(()=>[e(m,{label:1,size:"large"},{default:a(()=>[d("自费")]),_:1}),e(m,{label:0,size:"large"},{default:a(()=>[d("医保")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"当前住址"},{default:a(()=>[e(j,{modelValue:o.value.addressSelected,"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.addressSelected=l),props:S},null,8,["modelValue"])]),_:1}),e(s,{label:"详细地址"},{default:a(()=>[e(p,{modelValue:o.value.address,"onUpdate:modelValue":t[9]||(t[9]=l=>o.value.address=l),placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{"content-position":"left"},{default:a(()=>[d("紧急联系人信息（选填）")]),_:1}),e(x,{style:{margin:"25px auto",width:"80%"},"label-width":"80"},{default:a(()=>[e(s,{label:"用户姓名"},{default:a(()=>[e(p,{modelValue:o.value.contactsName,"onUpdate:modelValue":t[10]||(t[10]=l=>o.value.contactsName=l),placeholder:"请输入用户姓名"},null,8,["modelValue"])]),_:1}),e(s,{label:"证件类型"},{default:a(()=>[e(D,{modelValue:o.value.contactsCertificatesType,"onUpdate:modelValue":t[11]||(t[11]=l=>o.value.contactsCertificatesType=l),placeholder:"请选择证件类型",style:{width:"100%"}},{default:a(()=>[(r(!0),V(F,null,N(C.value,l=>(r(),y(A,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"证件号码"},{default:a(()=>[e(p,{modelValue:o.value.contactsCertificatesNo,"onUpdate:modelValue":t[12]||(t[12]=l=>o.value.contactsCertificatesNo=l),placeholder:"请输入证件号码"},null,8,["modelValue"])]),_:1}),e(s,{label:"手机号码"},{default:a(()=>[e(p,{modelValue:o.value.contactsPhone,"onUpdate:modelValue":t[13]||(t[13]=l=>o.value.contactsPhone=l),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(i,{type:"primary",onClick:L},{default:a(()=>[d("提交")]),_:1}),e(i,{onClick:E},{default:a(()=>[d("重置")]),_:1})]),_:1})]),_:1})])):(r(),V("div",ie,[g.value.length<=0?(r(),y(k,{key:0,style:{margin:"0 auto"},description:"暂无就诊人信息"})):(r(!0),V(F,{key:1},N(g.value,(l,I)=>(r(),y(se,{class:"visitor-item",key:l.id,item:l,hasChose:z.value===I,hasDelete:"",onClick:me=>B(I),onOnEdit:T,onOnDelete:Y},null,8,["item","hasChose","onClick"]))),128))]))]),_:1})}}});const ye=ee(pe,[["__scopeId","data-v-aeb061fc"]]);export{ye as default};
